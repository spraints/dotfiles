#!/usr/bin/env ruby
#/ Usage: ~/.bin/airport
#/   shows the current network

require "shellwords"

IF = ENV["IF"] || "en0"

def main
  unless ARGV.empty?
    puts File.readlines(__FILE__).grep(/^#\//).map { |s| s[3..] }
    exit 1
  end

  stat = `ipconfig getsummary #{Shellwords.escape(IF)}`
  ssid = stat.lines.grep(/ SSID /).map { |s| s.split(":", 2).last.strip }.first
  puts ssid
end

main
